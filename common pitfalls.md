


	<title>
	Common Python Pitfalls
 - Udacity</title>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="/favicon.ico?336d6d4063dcb6cee216c40d87cb1489" />
	<meta name="description" content="Discover online classes taught by top instructors and industry experts. Take courses at your own pace.">
	
	<meta name="robots" content="noodp" />

	
		<meta property="og:type" content="website">
	
	
		<meta property="og:image" content="http://lh6.ggpht.com/pXxnDpPZHXnKqBqwvI4cmhsztuM23lbmy0o5zVEZTfXQR69u5Nlx7hfxcCOGZP_Yp_3HwpK3zVAtXejMAg=s0">
	
	
	
	

	
		<meta name="twitter:card" content="summary_large_image">
	
	
		<meta name="twitter:site" content="@udacity">
	
	
		<meta name="twitter:creator" content="@udacity">
	
	
	
	


	<meta name="application-name" content="Udacity"/>
	<meta name="msapplication-TileColor" content="#FFFFFF"/>
	<meta name="msapplication-TileImage" content="/media/img/logos/udacity/windows_tile/udacity-full-144x144.png"/>

	<meta name="google-site-verification" content="ELX2btu3VElBKIdvkGj5ESBnJh_Dg9PnWjuCwVkPEkA" />

	<meta name="google-site-verification" content="2EIknjtmPaA5nE7j3noLXPah_x_bM2bFEHZRdqSYYMk" />

	<meta http-equiv="X-UA-Compatible" content="requiresActiveX=true"/>

	<meta name="msvalidate.01" content="4ADB80ADF9A5138C8BE3B23EE428B306" />
	<link rel="apple-touch-icon" href="//lh4.ggpht.com/dR8q0uh3GoH-kU00KnQ1elSkqBeWi-ZOQ1_14uDxWRACmhrIDQFOfItKdAf7hngoResshnbb9hmVpPuwkjI=s0#w=152&h=152">

	<link type="text/plain" rel="author" href="http://udacity.com/humans.txt" />

	
		<link rel="stylesheet" type="text/css" href="/media/css/udacity/udacity.min.css?336d6d4063dcb6cee216c40d87cb1489">

	


	<script type="text/javascript">
		window.account = {"first_name": "Krish", "last_name": "Puvvada", "external_service_password": "0EOoHPmlELJM29lXvHLZ3pUn7XiVkkyXVSW7CEh0kWpySxozuxhDshhi35XCjYjekXF109AlzAIizNrcj3SIZSkNcYHulTVPDm2s", "tags": [{"tag": "yes", "namespace": "downloadables_tour_complete"}, {"tag": "reminders_tour_complete", "namespace": "experiments"}], "_registered": true, "email": {"_verification_code_sent": true, "_verified": true, "address": "vpuvvad@ncsu.edu"}, "jabber_id": "Krish-rir27@udacity.com", "key": "2649358538", "_image_url": "//robohash.org/udacity-2649358538.png", "nickname": "Krish", "_enrollments": [{"milestones": [], "node_key": "cs271", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "cs101", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "cs215", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud775", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "cs373", "group_refs": [], "state": "unenrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": ["enrolled"]}, {"milestones": [], "node_key": "cs212", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud036", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud651", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud359", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud617", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud436", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud675", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud120", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud805", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "cs046", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "ud197", "group_refs": [], "state": "enrolled", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}, {"milestones": [], "node_key": "nd002", "group_refs": [{"ref": "Group", "key": "5504284057927680"}], "state": "interested", "first_paid_enrollment_time": null, "email_ok": true, "previous_states": []}], "site_preferences": null};
	</script>

		<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
		<script type="text/javascript">
			if (typeof jQuery === 'undefined') {
				document.write(unescape("%3Cscript src='/media/js/standalone/libs/jquery-1.10.2.min.js'%3E%3C/script%3E"));
			}
		</script>
	<script type="text/javascript" src="/media/js/standalone/libs/raygun/raygun.js"></script>
	<script>
		try{  //Just in case Raygun's internal API breaks.
			(function(){
				var MAX_ERRORS_TO_SEND = 5; // If we have more errors than this we won't send.
				var numberOfErrors = 0; // How many errors we've sent
				var errorPreprocess = function(payload){ // Runs before every error send.
					numberOfErrors++;
					return numberOfErrors <= MAX_ERRORS_TO_SEND ? payload : false;
				};
				var getStateParameters = function(){
					return {
						fullUrl: document.location.href
					}
				}
				Raygun.init(
					'jfgjYMtPReh934E3tzDk7w==',
					{
						
						ignore3rdPartyErrors: false
					}
				).attach().withCustomData(getStateParameters);
				Raygun.onBeforeSend(errorPreprocess); // Give Raygun the preprocess function
				Raygun.setUser( // Set the user info on Raygun
					window.account['key'],
					!window.account['_registered'],
					window.account['email'] ? window.account['email']['address'] : '',
					(window.account['first_name'] ? window.account['first_name'] : '') +
						' ' + (window.account['last_name'] ? window.account['last_name'] : ''),
					window.account['nickname'] ? window.account['nickname'] : '',
					window.account['key']);
			})();
		}catch(err){} // Eat any Raygun errors.
	</script>

	<script src="//cdn.optimizely.com/js/655050218.js"></script>

	
	
</head>
<body data-ng-controller="siteFrame" data-modal-anti-scroll-helper data-ng-class="{'responsive': responsivenessIsEnabled, 'non-responsive': !responsivenessIsEnabled, 'modal-open': isModalActive()}">


	<script>
		window.dataLayer = [];

		// Always push the account Id since many tags need it immediately on load.
		// The munchkin library needs a key (calculated on a per account basis)
		// and email address on load as well.
		window.dataLayer.push({
			'userId': window.account['key'],
			'userEmail': window.account['email'] ? window.account['email']['address'] : '',
			'munchkinKey': '48c033c3a773ec81652a5045d9ee2a02d073aeb4'
		});
	</script>
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NKKCFH"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NKKCFH');</script>


	

	<div id="page-content" data-qualaroo-survey-info-hack>
		
		<header class="navbar site-nav navbar-inverse navbar-static-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					
						<a itemprop="brand" itemscope itemtype="http://schema.org/Brand" class="logo navbar-brand" href="/" id="header-logo">
							<meta itemprop="logo" content="https://lh6.ggpht.com/pXxnDpPZHXnKqBqwvI4cmhsztuM23lbmy0o5zVEZTfXQR69u5Nlx7hfxcCOGZP_Yp_3HwpK3zVAtXejMAg=s0">
							<img alt="Udacity Logo"
							src="//lh4.ggpht.com/LUgsz3XTdD-dW9qCenNcFZWaBKM6At_MbMjODMCJOC8ZoR4hIm_rVBQghBmk5kQ-kRa66yhEQT0BH88gUmwX=s85"
							srcset="//lh4.ggpht.com/LUgsz3XTdD-dW9qCenNcFZWaBKM6At_MbMjODMCJOC8ZoR4hIm_rVBQghBmk5kQ-kRa66yhEQT0BH88gUmwX=s170 2x"
							style="width:85px;">
						</a>
					
				</div>

				<nav class="navbar-collapse collapse text-center-xs" id="navbar-collapse" role="navigation">
					
					
					
						<!-- Logged in dropdowns -->
						<ul data-user-menu class="nav navbar-nav navbar-right ng-cloak" data-ng-cloak>
							<li class="dropdown" data-ng-controller="myCoursesDropDown" data-ng-click="manualInitialize()">
								<!-- causes error with router if href="#"-->
								<a class="dropdown-toggle" data-toggle="dropdown" href="">
									My Courses<b class="caret"></b>
								</a>
								<ul class="dropdown-menu dropdown-menu-scrollable dropdown-menu-scrollable-max my-courses-dropdown">
									<li class="dropdown-menu-loading" data-ng-show="loading"><img src="/media/img/site/icons/udacity/tp_loading.gif"></li>
									<li class="dropdown-header hidden-xs" data-ng-if="forPayEnrollments.length > 0"><h4>Enrolled Courses</h4></li>
									<li data-ng-repeat="enrollment in forPayEnrollments">
										<a data-ng-show="isCurrentEnrolled(enrollment, nodeMap[enrollment['node_key']]) && nodeMap[enrollment['node_key']]['_semantic_type'] == 'Course'"
												data-ng-href="/course/viewer#!/c-{{enrollment['node_key']}}">{{nodeMap[enrollment['node_key']]['title']}}</a>
										<a data-ng-show="isCurrentEnrolled(enrollment, nodeMap[enrollment['node_key']]) && nodeMap[enrollment['node_key']]['_semantic_type'] == 'Degree'"
												data-ng-href="/course/{{enrollment['node_key']}}">{{nodeMap[enrollment['node_key']]['title']}}</a>
										<!-- assumes user is not in current_student_group_refs and future_student_group_refs for the same course at the same time -->
										<a data-ng-show="isPreEnrolled(enrollment, nodeMap[enrollment['node_key']])"
												data-ng-href="/course/{{enrollment['node_key']}}">{{nodeMap[enrollment['node_key']]['title']}} (Pre-Enrolled)</a>
									</li>
									<li class="divider hidden-xs" data-ng-if="forPayEnrollments.length > 0 && nonPayEnrollments.length > 0"></li>
									<li class="dropdown-header hidden-xs" data-ng-if="nonPayEnrollments.length > 0">
										<h4>Course materials</h4>
									</li>
									<li data-ng-repeat="enrollment in nonPayEnrollments">
										<a data-ng-href="/course/viewer#!/c-{{enrollment['node_key']}}"><span data-ng-show="nodeMap[enrollment['node_key']]['isRelatedCourse']">*</span>{{nodeMap[enrollment['node_key']]['title']}}</a>
									</li>
									<li data-ng-show="enrolledInSupportingCourses"><a><small>* Nanodegree supporting course</small></a></li>
									<li class="dropdown-header" data-ng-show="nonPayEnrollments.length == 0 && forPayEnrollments.length == 0 && !loading">
										<p>Hello there! You are not taking any courses yet.</p>
									</li>
									<li role="presentation" class="divider hidden-xs"></li>
									<li class="dropdown-menu-footer">
										<a href="/account#!/my-courses" data-ng-hide="nonPayEnrollments.length == 0 && forPayEnrollments.length == 0">
											Manage My Courses
										</a>
										<a href="/courses#!/all" data-ng-show="nonPayEnrollments.length == 0 && forPayEnrollments.length == 0">
											Browse Courses
										</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a class="dropdown-toggle" data-toggle="dropdown" href="">{{user()['first_name']}} {{user()['last_name']}}<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="/account">Account</a></li>
									<li class="divider hidden-xs"></li>
									<li><a href="" data-ng-click="logOut()">Sign Out</a></li>
								</ul>
							</li>
						</ul>
						<!-- END Logged in dropdowns -->
					

					
							<ul class="nav navbar-nav navbar-right">
									<li>
										<a class="dropdown-toggle" href="/courses#!/all">Catalog</a>
									</li>
							</ul>
					

					
					

					

							<ul class="nav navbar-nav navbar-right">
								<li>
									<a href="/nanodegree">Nanodegree</a>
								</li>
							</ul>

					

				</nav>
			</div>
		</header>
		






<link rel="stylesheet" type="text/css" href="/media/wiki/style.css?336d6d4063dcb6cee216c40d87cb1489"/>

<div id="wiki-content-container" class="container left-hand-nav-container">
	<div class="row">
		<div class="col-xs-12" id="wiki-left-hand-nav-title-wrapper">
		</div>
	</div>
	<div class="row" id="wiki-content-wrapper">
		<div class="col-xs-12">
			

<ul id="wikitabs" class="locked">
  <li class="active"><a class="view" href="/wiki/common-python-pitfalls">View</a></li>
    <li><a href="/wiki/w/edit?page=common-python-pitfalls">Edit</a></li>
  <li><a href="/wiki/w/history?page=common-python-pitfalls">History</a></li>
</ul>
<div class="wtabs extl" id="pb">
      <div class="pretty-format"><h1 id="common-python-pitfalls">Common Python Pitfalls</h1>

<p>This <em>page is for students to</em> record mistakes that commonly occur while learning Python.</p>

<span class="toc"><p>Contents</p><ul>
  <li>1 <a href="#common-python-pitfalls">Common Python Pitfalls</a>
  <ul>
    <li>1.1 <a href="#beware-default-parameters-of-mutable-types">Beware Default Parameters of Mutable Types</a></li>
    <li>1.2 <a href="#take-care-with">Take care with +=</a></li>
    <li>1.3 <a href="#floating-point-and-integers">Floating point and integers</a></li>
  </ul></li>
</ul>
</span>

<p><strong>Making a list of lists with [[1] * 2] * 3
------------------------------------------</strong></p>

<p>The result does indeed look like a list of lists:</p>

<pre><code class="prettyprint">*&gt;&gt;&gt; x = [[1]*2]*3*
&gt;&gt;&gt; x
[[1, 1],
 [1, 1],
 [1, 1]]
</code></pre>

<p>But the inner lists all reference the same list. You can see this by checking the memory location of the lists with <code>id</code>:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; id(x[0]) == id(x[1]) == id(x[2])
True
</code></pre>

<p>This can lead to unexpected behavior because modifying one item in <code>x</code> affects all items in <code>x</code>:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; x[1][0] = 2
&gt;&gt;&gt; x
[[2, 1],
 [2, 1],
 [2, 1]]
</code></pre>

<p>One way to create a list of independent lists in Python is to use a list comprehension instead:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; x = [[1]*2 for _ in range(3)]
&gt;&gt;&gt; x
<a class="int missing" href="/wiki/w/edit?page=1%2C_1%5D%2C_%5B1%2C_1%5D%2C_%5B1%2C_1" title="1, 1], [1, 1], [1, 1 (create)">1, 1], [1, 1], [1, 1</a>
</code></pre>

<p>Now when you modify an item in one list, the other lists are not also modified:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; x[1][0] = 2
&gt;&gt;&gt; x
<a class="int missing" href="/wiki/w/edit?page=1%2C_1%5D%2C_%5B2%2C_1%5D%2C_%5B1%2C_1" title="1, 1], [2, 1], [1, 1 (create)">1, 1], [2, 1], [1, 1</a>
</code></pre>

<h2 id="beware-default-parameters-of-mutable-types">Beware Default Parameters of Mutable Types</h2>

<p>This is a common pitfall for new and experienced Python developers. Lets start with an example:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; def foo(x=[]):
...&nbsp;    x.append(1)
...&nbsp;    print x
...
&gt;&gt;&gt; foo()
[1]
&gt;&gt;&gt; foo()
[1, 1]
&gt;&gt;&gt; foo()
[1, 1, 1]
</code></pre>

<p>The default parameter x, is a list, which is a mutable type. So, why does foo keep appending instead of creating a new list? For a clue, lets look at the object the function is returning.</p>

<pre><code class="prettyprint">&gt;&gt;&gt; id(function())
42415216
&gt;&gt;&gt; id(function())
42415216
&gt;&gt;&gt; id(function())
42415216
</code></pre>

<p>Here we can see that the id of the object being returned is identical each time, so this means that the function is using the same object over and over, and since it is mutable (i.e. changeable), we keep appending to it.</p>

<p>So why does this happen? It is because default parameter values are always evaluated when, and only when, the "def" statement they belong to is executed.</p>

<p>To understand how we can get the desired results, lets look at more code:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; def foo(x=None):
...&nbsp;    if x is None:
...&nbsp;        x = []
...&nbsp;    x.append(1)
...&nbsp;    print x
&gt;&gt;&gt; foo()
[1]
&gt;&gt;&gt; foo()
[1]
</code></pre>

<p>In summary, you should use a placeholder value denoting "not given" and replace with the mutable you'd like as default. In this case, we used 'None' as the placeholder, and created a new (mutable) list when it was found.</p>

<h2 id="take-care-with">Take care with +=</h2>

<p>For mutable objects, x+=y need not be the same as x = x + y.</p>

<p>Consider:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; x = [5,7,11]
&gt;&gt;&gt; id(x)
47091224
&gt;&gt;&gt; x += [4]
&gt;&gt;&gt; id(x)
47091224
&gt;&gt;&gt; x = x + [5]
&gt;&gt;&gt; id(x)
32259608
</code></pre>

<p>x += y changes the list in-place, similar to the extend method. x = x+y creates a new list and rebinds it to x.</p>

<p>Care needs to be taken when mixing mutable and immutable objects.</p>

<p>Consider:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; tp = ([1],[2],)
&gt;&gt;&gt; tp[0] += [3,4]

Traceback (most recent call last):
  File "&lt;pyshell#11&gt;", line 1, in &lt;module&gt;
    tp[0] += [3,4]
TypeError: 'tuple' object does not support item assignment

&gt;&gt;&gt; tp
([1, 3, 4], [2])
</code></pre>

<p>Item assignment fails, but += has still changed the list inside the tuple, which happens in place.</p>

<h2 id="floating-point-and-integers">Floating point and integers</h2>

<p>On Python versions lower than 3, all numbers are considered integers unless explicitly written with a decimal point. This can cause unexpected results as it returns the floor of integer divisions.</p>

<pre><code class="prettyprint">&gt;&gt;&gt; 1/2
0
&gt;&gt;&gt; 1.0/2
0.5
</code></pre>

<p>There are several way for dealing with this. You can explicitly write the number with the decimal point as shown above. You can cast the dividing integer to a float:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; float(1)/2
0.5
</code></pre>

<p>You can add a floating point number to it:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; (1+0.0)/2
0.5
</code></pre>

<p>Or in Python 2.2 or later, you can import the division method from the __future__ module. Just remember to import this at the beginning of your Python file.</p>

<pre><code class="prettyprint">&gt;&gt;&gt; from __future__ import division
&gt;&gt;&gt; 1/2
0.5
</code></pre>

<p>Conversely, in Python 3 and above, all numbers are treated as floats in division operations. But this also can lead to unexpected results, when the result of a division is used as an index in an iterable.</p>

<pre><code class="prettyprint">&gt;&gt;&gt; a = [1,2,3,4]
&gt;&gt;&gt; a[4/2]
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: list indices must be integers, not float
</code></pre>

<p>So you have to cast the resulting float to an int before using it as indexes, or use the integer division operator "//".</p>

<pre><code class="prettyprint">&gt;&gt;&gt; a = [1,2,3,4]
&gt;&gt;&gt; a[int(4/2)]
3
&gt;&gt;&gt; a[4//2]
3
</code></pre>
</div>
</div>



<div id="wiki-footer">
    <p id="pm">This 
        page was last edited
    on 2014/04/25 08:51:09.</p>
</div>


		</div>
	</div>
</div>



